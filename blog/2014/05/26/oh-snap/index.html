
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Oh SNAP! - Vijay Mahantesh</title>
	<meta name="author" content="Vijay Mahantesh SM">

	
	<meta name="description" content="Oh SNAP! For years, I have been using NetworkX and hadn’t found any good substitute which has fast execution as CPP with rapid development as python &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Vijay Mahantesh" type="application/atom+xml">
	
	<link rel="canonical" href="http://vijaym.in/blog/2014/05/26/oh-snap/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://s24.postimg.org/whw2etdbp/DSC06550_1.jpg' alt='Profile Picture' style='width: 180px; height: 180px' />");
		});
	</script>
</div>
<hgroup>
  <h1><a href="/">Vijay Mahantesh</a></h1>
  
    <h2>Sailing from east to Northwestern University</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about">About Me</a></li>
  <li><a href="/interests">What interest me</a></li>
  <li><a href="/research">Research</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="https://docs.google.com/file/d/0Bwb_Zi7_nUirdkpENmlxdzVpVDA/edit?usp=sharing" target="_blank">Curriculum Vitae</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="facebook" href="http://www.facebook.com/vijay.mahantesh.sm" title="Facebook" target="_blank" >Facebook</a>
		
		
		<a class="google" href="https://plus.google.com/100410812567315524182" rel="author" title="Google+" target="_blank" >Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/vijaym123" title="Twitter" target="_blank" >Twitter</a>
		
		
		<a class="github" href="https://github.com/vijaym123" title="GitHub" target="_blank">GitHub</a>
		
		
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/vijaymahantesh" title="LinkedIn" target="_blank">LinkedIn</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS" target="_blank">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Oh SNAP!</h1>
	<div class="entry-content" itemprop="articleBody"><p>For years, I have been using <a href="https://networkx.github.io/" target="_blank">NetworkX</a> and hadn’t found any good substitute which has fast execution as CPP with rapid development as python. <a href="http://snap.stanford.edu/snappy/index.html" target="_blank">SNAP</a> is a powerful tool which is aimed to be built this direction. For researches in network science, it provides tools to do general purpose and high performance system for analysis and manipulation of large networks.</p>

<p>Installing SNAP-python in Linux, Mac OS X and Windows is given here in this <a href="http://snap.stanford.edu/snappy/index.html#introduction" target="_blank">website</a>.</p>

<p>Sometimes when you are working on a library that is still under development it is better to use virtualenv. A Virtual Environment, put simply, is an isolated working copy of Python which allows you to work on a specific project without worry of affecting other projects. For more details about virtualenv please take a look at <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/" target="_blank">this</a>.</p>

<p>I faced certain problems with virtualenv and SNAP with Mac OS X 10.9.3. After reading few manuals on shared libraries, I could resolve this.</p>

<p>Here is the problem I faced:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">snap</span>
</span><span class='line'><span class="n">Fatal</span> <span class="n">Python</span> <span class="n">error</span><span class="p">:</span> <span class="n">PyThreadState_Get</span><span class="p">:</span> <span class="n">no</span> <span class="n">current</span> <span class="n">thread</span>
</span><span class='line'><span class="n">Abort</span> <span class="n">trap</span><span class="p">:</span> <span class="mi">6</span>
</span></code></pre></td></tr></table></div></figure>


<p>So I thought of writing a step by step blog to help users to install SNAP successfully with virtualenv.</p>

<p>To create a virtualenv directory :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">virtualenv</span> <span class="o">--</span><span class="n">python</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">which</span> <span class="n">python</span><span class="p">)</span> <span class="o">--</span><span class="n">distribute</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span> <span class="n">snap</span><span class="o">/</span>
</span></code></pre></td></tr></table></div></figure>


<p>Change your working directory to snap. Activate virtualenv and then install numpy, graphviz.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">cd</span> <span class="n">snap</span><span class="o">/</span>
</span><span class='line'><span class="n">source</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</span><span class='line'><span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
</span><span class='line'><span class="n">pip</span> <span class="n">install</span> <span class="n">graphviz</span>
</span></code></pre></td></tr></table></div></figure>


<p>Install gnuplot with homebrew. Download and install python extension for <a href="http://gnuplot-py.sourceforge.net/" target="_blank">gnuplot</a> within the virtualenv snap. Now comes the last step of downloading and installing SNAP.py library. Download SNAP repository from the <a href="http://snap.stanford.edu/snappy/release/" target="_blank">website</a> and place it in the working directoy (snap/).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">tar</span> <span class="n">zxvf</span> <span class="n">snap</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mf">2.2</span><span class="o">-</span><span class="n">macosx10</span><span class="o">.</span><span class="mf">7.5</span><span class="o">-</span><span class="n">x64</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mf">7.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span><span class='line'><span class="n">cd</span> <span class="n">snap</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mf">2.2</span><span class="o">-</span><span class="n">macosx10</span><span class="o">.</span><span class="mf">7.5</span><span class="o">-</span><span class="n">x64</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mi">7</span>
</span><span class='line'><span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</span></code></pre></td></tr></table></div></figure>


<p>Execute the following lines in python or in ipython.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">snap</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you are getting the any errors related to PyThreadState_Get, then do the following.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">install_name_tool</span> <span class="o">-</span><span class="n">change</span> <span class="nb">bin</span><span class="o">/</span><span class="n">python</span> <span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Python</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.7</span><span class="o">//</span><span class="n">lib</span><span class="o">/</span><span class="n">libpython2</span><span class="o">.</span><span class="mf">7.</span><span class="n">dylib</span> <span class="n">snap</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="mf">2.2</span><span class="o">-</span><span class="n">macosx10</span><span class="o">.</span><span class="mf">7.5</span><span class="o">-</span><span class="n">x64</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">_snap</span><span class="o">.</span><span class="n">so</span>
</span></code></pre></td></tr></table></div></figure>


<p>install_name_tool is used in Mac OS X to change dynamic shared library install names. Now try to run the snap example files. Voila! It should work.</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2015 - Vijay Mahantesh SM -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
			

<script type="text/javascript">
      var disqus_shortname = 'vijaymahantesh';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://vijaym.in/blog/2014/05/26/oh-snap/';
        var disqus_url = 'http://vijaym.in/blog/2014/05/26/oh-snap/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





		</div>
	</div>
</body>
</html>
